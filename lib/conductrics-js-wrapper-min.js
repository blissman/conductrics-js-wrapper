(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};window.ConductricsJS=function(){function r(n,r,i){var s,o,u;this.owner=n,this.apikey=r,this.options=i!=null?i:{},this.send=t(this.send,this),this.goal=t(this.goal,this),this.decision=t(this.decision,this),(s=this.options).server==null&&(s.server="http://api.conductrics.com"),(o=this.options).timeout==null&&(o.timeout=5e3),(u=this.options).transport==null&&(u.transport=e)}var n;return r.prototype.decision=function(e,t,n){var r,i,s,o,u;t==null&&(t={}),n==null&&(n=null),r=[e,"decisions"],i=null;if(t.choices!=null){u=t.choices;for(s in u){o=u[s];if((o!=null?o.join:void 0)==null)continue;r.push(""+s+":"+o.join(",")),i==null&&(i={}),i[s]||(i[s]={code:o[0]})}delete t.choices}return this.send(r,t,function(e){var t,r;if(n==null)return;return t=(r=e!=null?e.decisions:void 0)!=null?r:i,n(t)})},r.prototype.goal=function(e,t,n){var r;return r=[e,"goal"],t.goal!=null&&(r.push(t.goal),delete t.goal),this.send(r,t,n)},r.prototype.send=function(e,t,r){var i,s=this;return t==null&&(t={}),t.apikey=this.apikey,t._t=(new Date).getTime(),i=""+this.options.server+"/"+this.owner+"/"+e.join("/")+"?"+n(t),new this.options.transport(i,this.options.timeout,function(e){var t;try{return r(JSON.parse(e))}catch(n){return t=n,r(null)}})},n=function(e){var t,n,r;n="";for(t in e)r=e[t],n+="&"+t+"="+escape(r);return n},r}(),e=function(){function t(t,n,r){var i;i=e(t);if(i==null)return r(null);typeof n=="number"&&(i.timeout=n),i.onload=function(){return r(i.responseText)},i.onerror=i.ontimeout=function(){return r(null)},i.send()}var e;return e=function(e){var t;return typeof XMLHttpRequest!="undefined"&&XMLHttpRequest!==null&&(t=new XMLHttpRequest),(t!=null?t.withCredentials:void 0)!=null?t.open("GET",e,!0):typeof XDomainRequest!="undefined"&&XDomainRequest!==null?(t=new XDomainRequest,t.open("GET",e)):t=null,t},t}()}).call(this);